script = document.createElement('script');
script.textContent="function PriorityQueue(){this.data=[]}var __counter__=0,old_performance=performance.now;performance.now=function(){return __counter__},PriorityQueue.prototype.push=function(e,_,o,n){priority=+e;for(var r=0;r<this.data.length&&this.data[r][0]<priority;r++);1==n?this.data.splice(r,0,[priority,_,o,n]):r<this.data.length&&this.data[r][0]==priority&&1==this.data[r][3]?this.data[r]=[priority,_,o,n]:this.data.splice(r,0,[priority,_,o,n])},PriorityQueue.prototype.pop=function(){return this.data.shift()},PriorityQueue.prototype.size=function(){return this.data.length},PriorityQueue.prototype.top=function(){return this.data[0]};var __event_queue__=new PriorityQueue,__event_begin__=function(e){__event_queue__.push(e,null,null,1)},__event_end__=function(e,_,o){__event_queue__.push(e,_,o,0)},old_setTimeout=setTimeout;setTimeout=function(e,_,o){__event_begin__(__counter__+_),old_setTimeout(__event_end__,_,__counter__+_,e,o)};var old_windowonerror,__deterfox_window_onerror__=[],dispatch=function(){if(__event_queue__.size()>0&&0==__event_queue__.top()[3]){var e=__event_queue__.pop();__counter__=e[0],cb=e[1],params=e[2],null!=cb&&cb.apply(this,params)}else __event_queue__.size()>0&&1==__event_queue__.top()[3]?__counter__+1<=__event_queue__.top()[0]&&(__counter__+=1):__counter__+=1;window.onerror+"+'"'+""+'"'+"!="+'"'+"function (){__deterfox_window_onerror__.push([old_windowonerror,arguments])}"+'"'+"&&(console.log(window.onerror),old_windowonerror=window.onerror,window.onerror=function(){__deterfox_window_onerror__.push([old_windowonerror,arguments])}),old_setTimeout(dispatch,1)};dispatch();var old_appendChild=Element.prototype.appendChild;Element.prototype.appendChild=function(){arguments[0].endTime=__counter__+100,__event_begin__(arguments[0].endTime);var e=arguments[0].onload;arguments[0].onload=function(){__deterfox_window_onerror__.length>0?window_onerror=__deterfox_window_onerror__.pop():window_onerror=[null,null],e=null;var _=[window_onerror[0],window_onerror[1],e,arguments,window,this];__event_end__(this.endTime,function(){onerror_handler=arguments[0],onerror_arguments=arguments[1],onload_handler=arguments[2],onload_arguments=arguments[3],window_ptr=arguments[4],ele_ptr=arguments[5],console.log(window_ptr),console.log(ele_ptr),null!=onerror_handler&&onerror_handler.call(window_ptr,onerror_arguments),null!=onload_handler&&onload_handler.apply(ele_ptr,onload_arguments)},_)};var _=arguments[0].onerror;arguments[0].onerror=function(){__event_end__(this.endTime,_,arguments)},old_appendChild.apply(this,arguments)};var __deterfox_old_requestAnimationFrame__=requestAnimationFrame;requestAnimationFrame=function(e){__event_begin__(__counter__+100);__deterfox_old_requestAnimationFrame__(function(){__event_end__(__counter__+100,e)})};";
document.documentElement.appendChild(script);
